import os
import logging
import threading
from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, ContextTypes, filters
from flask import Flask

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

TOKEN = os.getenv("BOT_TOKEN")
if not TOKEN:
    logger.error("–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è BOT_TOKEN –Ω–µ –∑–∞–¥–∞–Ω–∞")
    raise RuntimeError("–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è BOT_TOKEN –Ω–µ –∑–∞–¥–∞–Ω–∞")

rules = {
    "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏ —Å–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–µ": "–°–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–µ ‚Äî –¥–≤–∞ –∏ –±–æ–ª–µ–µ —Å–ª–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–æ —Å–º—ã—Å–ª—É. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ ‚Äî –≤—ã—Ä–∞–∂–∞–µ—Ç –∑–∞–∫–æ–Ω—á–µ–Ω–Ω—É—é –º—ã—Å–ª—å...",
    "–í–∏–¥—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ —Ü–µ–ª–∏ –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è. –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –≤ –∫–æ–Ω—Ü–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π": "–ü–æ–≤–µ—Å—Ç–≤–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ (.) –í–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ (?) –ü–æ–±—É–¥–∏—Ç–µ–ª—å–Ω—ã–µ (. –∏–ª–∏ !)",
    "–í–∏–¥—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ –∏–Ω—Ç–æ–Ω–∞—Ü–∏–∏. –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –≤ –∫–æ–Ω—Ü–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π": "–í–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ (!) –ù–µ–≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ (.)",
    "–ì–ª–∞–≤–Ω—ã–µ –∏ –≤—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ —á–ª–µ–Ω—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è": "–ì–ª–∞–≤–Ω—ã–µ: –ø–æ–¥–ª–µ–∂–∞—â–µ–µ –∏ —Å–∫–∞–∑—É–µ–º–æ–µ. –í—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ, –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–æ.",
    "–û–±—Ä–∞—â–µ–Ω–∏–µ. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å –æ–±—Ä–∞—â–µ–Ω–∏–µ–º": "–û–±—Ä–∞—â–µ–Ω–∏–µ ‚Äî —Å–ª–æ–≤–æ –∏–ª–∏ —Å–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–µ, –Ω–∞–∑—ã–≤–∞—é—â–µ–µ —Ç–æ–≥–æ, –∫ –∫–æ–º—É –æ–±—Ä–∞—â–∞—é—Ç—Å—è. –í—ã–¥–µ–ª—è–µ—Ç—Å—è –∑–∞–ø—è—Ç—ã–º–∏.",
    "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–µ –∏ —Å–ª–æ–∂–Ω–æ–µ. –°–æ—é–∑—ã –∞, –∏, –Ω–æ –≤ —Å–ª–æ–∂–Ω–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏": "–ü—Ä–æ—Å—Ç–æ–µ ‚Äî –æ–¥–Ω–∞ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å–Ω–æ–≤–∞. –°–ª–æ–∂–Ω–æ–µ ‚Äî –¥–≤–µ –∏ –±–æ–ª–µ–µ –æ—Å–Ω–æ–≤. –°–æ—é–∑—ã –∞, –∏, –Ω–æ —Å–æ–µ–¥–∏–Ω—è—é—Ç —á–∞—Å—Ç–∏ —Å–ª–æ–∂–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.",
    "–°–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–µ. –ì–ª–∞–≤–Ω–æ–µ –∏ –∑–∞–≤–∏—Å–∏–º–æ–µ —Å–ª–æ–≤–æ": "–ì–ª–∞–≤–Ω–æ–µ —Å–ª–æ–≤–æ ‚Äî –æ—Ç –Ω–µ–≥–æ –∑–∞–¥–∞–µ—Ç—Å—è –≤–æ–ø—Ä–æ—Å. –ó–∞–≤–∏—Å–∏–º–æ–µ —Å–ª–æ–≤–æ ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å.",
    "–ü–∞–º—è—Ç–∫–∞ ¬´–ö–∞–∫ —Ä–∞–∑–æ–±—Ä–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ —á–ª–µ–Ω–∞–º¬ª": "1. –ù–∞–π—Ç–∏ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—Å–Ω–æ–≤—É 2. –ù–∞–π—Ç–∏ –≤—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ —á–ª–µ–Ω—ã 3. –£–∫–∞–∑–∞—Ç—å, –∫–∞–∫–∏–º–∏ —á–∞—Å—Ç—è–º–∏ —Ä–µ—á–∏ –≤—ã—Ä–∞–∂–µ–Ω—ã",
    "–í—Å—ë –æ —Å–ª–æ–≤–µ. –ó–≤—É–∫–∏ –∏ –±—É–∫–≤—ã": "–ó–≤—É–∫–∏ –º—ã –ø—Ä–æ–∏–∑–Ω–æ—Å–∏–º –∏ —Å–ª—ã—à–∏–º, –±—É–∫–≤—ã ‚Äî –≤–∏–¥–∏–º –∏ –ø–∏—à–µ–º.",
    "–û–º–æ–Ω–∏–º—ã. –§—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∑–º—ã. –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∏ –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞": "–û–º–æ–Ω–∏–º—ã ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–æ –∑–≤—É—á–∞–Ω–∏—é, –Ω–æ —Ä–∞–∑–Ω—ã–µ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é. –§—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∑–º—ã ‚Äî —É—Å—Ç–æ–π—á–∏–≤—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è.",
    "–û–±–æ–±—â–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –æ –±—É–∫–≤–∞—Ö –∏ –∑–≤—É–∫–∞—Ö. –ó–≤—É–∫–æ-–±—É–∫–≤–µ–Ω–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Å–ª–æ–≤–∞": "–†–∞–∑–±–æ—Ä: 1. –ó–∞–ø–∏—Å–∞—Ç—å —Å–ª–æ–≤–æ 2. –ü–æ—Å—Ç–∞–≤–∏—Ç—å —É–¥–∞—Ä–µ–Ω–∏–µ 3. –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —Å–ª–æ–≥–∏ 4. –û—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑–æ–≤–∞—Ç—å –∑–≤—É–∫–∏",
    "–û—Ä—Ñ–æ—ç–ø–∏—è: –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è —Ä—É—Å—Å–∫–∏—Ö —Å–ª–æ–≤": "–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ —Å–ª–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ—Ä–º–∞–º —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞.",
    "–ü—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∑–≤—É–∫–æ-–±—É–∫–≤–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞ —Å–ª–æ–≤ —Å –™ –∏ –¨. –ê–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫": "–¨ ‚Äî —Å–º—è–≥—á–∞–µ—Ç, –™ ‚Äî —Ä–∞–∑–¥–µ–ª—è–µ—Ç. –ê–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ ‚Äî —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–ª–æ–≤ –ø–æ –±—É–∫–≤–∞–º –∞–ª—Ñ–∞–≤–∏—Ç–∞.",
    "–ß–∞—Å—Ç–∏ —Ä–µ—á–∏. –û–±–æ–±—â–µ–Ω–∏–µ –∏ —É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π": "–ò–º—è —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ, –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ, –≥–ª–∞–≥–æ–ª, –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ, –ø—Ä–µ–¥–ª–æ–≥, —Å–æ—é–∑, —á–∞—Å—Ç–∏—Ü–∞.",
    "–ß–∞—Å—Ç–∏ —Å–ª–æ–≤–∞": "–ü—Ä–∏—Å—Ç–∞–≤–∫–∞, –∫–æ—Ä–µ–Ω—å, —Å—É—Ñ—Ñ–∏–∫—Å, –æ–∫–æ–Ω—á–∞–Ω–∏–µ, –æ—Å–Ω–æ–≤–∞.",
    "–ö–æ—Ä–µ–Ω—å —Å–ª–æ–≤–∞. –û–¥–Ω–æ–∫–æ—Ä–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞. –ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω—ã—Ö –∑–≤—É–∫–æ–≤ –≤ –∫–æ—Ä–Ω—è—Ö": "–ö–æ—Ä–µ–Ω—å ‚Äî –≥–ª–∞–≤–Ω–∞—è —á–∞—Å—Ç—å —Å–ª–æ–≤–∞. –û–¥–Ω–æ–∫–æ—Ä–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ ‚Äî –∏–º–µ—é—Ç –æ–±—â–∏–π –∫–æ—Ä–µ–Ω—å.",
    "–ù–µ–ø—Ä–æ–∏–∑–Ω–æ—Å–∏–º—ã–µ —Å–æ–≥–ª–∞—Å–Ω—ã–µ –≤ –∫–æ—Ä–Ω–µ —Å–ª–æ–≤–∞": "–ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ–¥–±–æ—Ä–æ–º –æ–¥–Ω–æ–∫–æ—Ä–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞, –≥–¥–µ —Å–æ–≥–ª–∞—Å–Ω—ã–π —Å–ª—ã—à–µ–Ω clearly: —Å–æ–ª–Ω—Ü–µ ‚Äî —Å–æ–ª–Ω–µ—á–Ω—ã–π.",
    "–°–ª–æ–∂–Ω—ã–µ —Å–ª–æ–≤–∞. –°–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥–ª–∞—Å–Ω—ã–µ –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª–æ–≤–∞—Ö": "–°–ª–æ–∂–Ω—ã–µ —Å–ª–æ–≤–∞ –æ–±—Ä–∞–∑—É—é—Ç—Å—è –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤. –°–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥–ª–∞—Å–Ω—ã–µ: –æ, –µ (–ø–∞—Ä–æ—Ö–æ–¥, –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ).",
    "–û–∫–æ–Ω—á–∞–Ω–∏–µ. –§–æ—Ä–º—ã —Å–ª–æ–≤–∞. –†–∞–∑–ª–∏—á–∏–µ –æ–¥–Ω–æ–∫–æ—Ä–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º —Å–ª–æ–≤–∞": "–û–∫–æ–Ω—á–∞–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è —Å–≤—è–∑–∏ —Å–ª–æ–≤ –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏. –§–æ—Ä–º—ã —Å–ª–æ–≤–∞ ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Å–ª–æ–≤–∞.",
    "–ù—É–ª–µ–≤–æ–µ –æ–∫–æ–Ω—á–∞–Ω–∏–µ. –°–ª–æ–≤–∞ –±–µ–∑ –æ–∫–æ–Ω—á–∞–Ω–∏–π. –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–¥–µ–ª–µ–Ω–∏—è –æ–∫–æ–Ω—á–∞–Ω–∏—è": "–ù—É–ª–µ–≤–æ–µ –æ–∫–æ–Ω—á–∞–Ω–∏–µ ‚Äî –Ω–µ –≤—ã—Ä–∞–∂–µ–Ω–æ –∑–≤—É–∫–∞–º–∏. –ß—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–µ, –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å–ª–æ–≤–æ.",
    "–ü—Ä–∏—Å—Ç–∞–≤–∫–∞. –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏—Å—Ç–∞–≤–∫–∏": "–ü—Ä–∏—Å—Ç–∞–≤–∫–∞ —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–¥ –∫–æ—Ä–Ω–µ–º. –û–±—Ä–∞–∑—É–µ—Ç –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞: –¥–µ–ª–∞—Ç—å ‚Üí –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å.",
    "–°—É—Ñ—Ñ–∏–∫—Å –∫–∞–∫ –∑–Ω–∞—á–∏–º–∞—è —á–∞—Å—Ç—å —Å–ª–æ–≤–∞. –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–¥–µ–ª–µ–Ω–∏—è –≤ —Å–ª–æ–≤–µ —Å—É—Ñ—Ñ–∏–∫—Å–∞": "–°—É—Ñ—Ñ–∏–∫—Å —Å—Ç–æ–∏—Ç –ø–æ—Å–ª–µ –∫–æ—Ä–Ω—è. –î–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –Ω—É–∂–Ω–æ –ø–æ–¥–æ–±—Ä–∞—Ç—å –æ–¥–Ω–æ–∫–æ—Ä–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞.",
    "–û—Å–Ω–æ–≤–∞ —Å–ª–æ–≤–∞. –†–∞–∑–±–æ—Ä —Å–ª–æ–≤–∞ –ø–æ —Å–æ—Å—Ç–∞–≤—É. –ê–Ω–∞–ª–∏–∑ –º–æ–¥–µ–ª–∏ —Å–æ—Å—Ç–∞–≤–∞ —Å–ª–æ–≤–∞": "–û—Å–Ω–æ–≤–∞ ‚Äî —á–∞—Å—Ç—å —Å–ª–æ–≤–∞ –±–µ–∑ –æ–∫–æ–Ω—á–∞–Ω–∏—è. –†–∞–∑–±–æ—Ä: –æ–∫–æ–Ω—á–∞–Ω–∏–µ ‚Üí –æ—Å–Ω–æ–≤–∞ ‚Üí –ø—Ä–∏—Å—Ç–∞–≤–∫–∞ ‚Üí –∫–æ—Ä–µ–Ω—å ‚Üí —Å—É—Ñ—Ñ–∏–∫—Å.",
    "–ü—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ —Å–ª–æ–≤ —Å –¥–≤—É–º—è –±–µ–∑—É–¥–∞—Ä–Ω—ã–º–∏ –≥–ª–∞—Å–Ω—ã–º–∏ –≤ –∫–æ—Ä–Ω–µ —Å–ª–æ–≤–∞": "–ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —É–¥–∞—Ä–µ–Ω–∏–µ–º: –¥–≤–∞ –±–µ–∑—É–¥–∞—Ä–Ω—ã—Ö –≥–ª–∞—Å–Ω—ã—Ö —Ç—Ä–µ–±—É—é—Ç –¥–≤–æ–π–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏.",
    "–ü—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ –±–µ–∑—É–¥–∞—Ä–Ω—ã—Ö –≥–ª–∞—Å–Ω—ã—Ö, –ø–∞—Ä–Ω—ã—Ö –ø–æ –≥–ª—É—Ö–æ—Å—Ç–∏/–∑–≤–æ–Ω–∫–æ—Å—Ç–∏ —Å–æ–≥–ª–∞—Å–Ω—ã—Ö –∑–≤—É–∫–æ–≤. –û/–Å –ø–æ—Å–ª–µ —à–∏–ø—è—â–∏—Ö": "–ë–µ–∑—É–¥–∞—Ä–Ω—ã–µ –≥–ª–∞—Å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —É–¥–∞—Ä–µ–Ω–∏–µ–º. –ü–æ—Å–ª–µ —à–∏–ø—è—â–∏—Ö –ø–æ–¥ —É–¥–∞—Ä–µ–Ω–∏–µ–º –ø–∏—à–µ—Ç—Å—è —ë, –∫—Ä–æ–º–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.",
    "–ü—Ä–∞–≤–∏–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å–ª–æ–≤ —Å –Ω–µ–ø—Ä–æ–∏–∑–Ω–æ—Å–∏–º—ã–º —Å–æ–≥–ª–∞—Å–Ω—ã–º –∑–≤—É–∫–æ–º –≤ –∫–æ—Ä–Ω–µ": "–ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ–¥–±–æ—Ä–æ–º —Å–ª–æ–≤–∞, –≥–¥–µ —Å–æ–≥–ª–∞—Å–Ω—ã–π —Å–ª—ã—à–µ–Ω: —Ä–∞–¥–æ—Å—Ç–Ω—ã–π ‚Äî —Ä–∞–¥–æ—Å—Ç—å.",
    "–ü—Ä–∞–≤–∏–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å–ª–æ–≤ —Å —É–¥–≤–æ–µ–Ω–Ω—ã–º–∏ —Å–æ–≥–ª–∞—Å–Ω—ã–º–∏": "–ó–∞–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ —Å–ª–æ–≤–∞—Ä—é: –∫–ª–∞—Å—Å, –∞–ª–ª–µ—è, –≥—Ä—É–ø–ø–∞.",
    "–ü—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ —Å–ª–æ–≤ —Å —Å—É—Ñ—Ñ–∏–∫—Å–∞–º–∏": "–°—É—Ñ—Ñ–∏–∫—Å—ã -–µ–∫, -–∏–∫: –µ—Å–ª–∏ –≥–ª–∞—Å–Ω—ã–π –≤—ã–ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ ‚Äî –ø–∏—à–µ—Ç—Å—è –µ–∫ (–∑–∞–º–æ—á–µ–∫ ‚Äî –∑–∞–º–æ—á–∫–∞).",
    "–°—É—Ñ—Ñ–∏–∫—Å—ã -–µ–∫, -–∏–∫ –≤ —Å–ª–æ–≤–∞—Ö, –∏—Ö –ø—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ. –ü—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ —Å—É—Ñ—Ñ–∏–∫—Å–∞ -–æ–∫ –ø–æ—Å–ª–µ —à–∏–ø—è—â–∏—Ö": "–ü–æ—Å–ª–µ —à–∏–ø—è—â–∏—Ö –ø–æ–¥ —É–¥–∞—Ä–µ–Ω–∏–µ–º –ø–∏—à–µ—Ç—Å—è –æ: –¥—Ä—É–∂–æ–∫, –ø–∏—Ä–æ–∂–æ–∫.",
    "–ü—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏—Å—Ç–∞–≤–æ–∫": "–ü—Ä–∏—Å—Ç–∞–≤–∫–∏ –ø–∏—à—É—Ç—Å—è –µ–¥–∏–Ω–æ: –¥–æ-, –ø–æ-, –ø–æ–¥-, –Ω–∞–¥-, –≤-, —Å-, –æ—Ç-, –∑–∞- –∏ –¥—Ä.",
    "–ü—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ –±—É–∫–≤ —ã, –∏ –ø–æ—Å–ª–µ —Ü. –ü—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ –∏–º—ë–Ω —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞ -–∏–π, -–∏—è, -–∏–µ": "–ü–æ—Å–ª–µ —Ü –ø–∏—à–µ—Ç—Å—è –∏ –≤ –∫–æ—Ä–Ω–µ: —Ü–∏—Ä–∫. –ò—Å–∫–ª—é—á–µ–Ω–∏—è: —Ü—ã–≥–∞–Ω, —Ü—ã–ø–ª–µ–Ω–æ–∫. –°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞ -–∏–µ: –∑–Ω–∞–Ω–∏–µ, —É–º–µ–Ω–∏–µ.",
    "Pravopisanie slov s razdelnymi tverdym i myagkim znakami": "Razdelitelnyj —å pishetsya posle soglasnyh pered e, —ë, yu, ya: v'yuga. Razdelitelnyj —ä pishetsya posle pristavok na soglasnyj pered e, —ë, yu, ya: pod'ezd.",
    "–ß–∞—Å—Ç–∏ —Ä–µ—á–∏": "–û—Å–Ω–æ–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã —Å–ª–æ–≤: –∏–º—è —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ, –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ, –≥–ª–∞–≥–æ–ª, –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ, —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–µ, –Ω–∞—Ä–µ—á–∏–µ, –ø—Ä–µ–¥–ª–æ–≥, —Å–æ—é–∑, —á–∞—Å—Ç–∏—Ü–∞, –º–µ–∂–¥–æ–º–µ—Ç–∏–µ.",
    "–ß–∞—Å—Ç—å —Ä–µ—á–∏ ‚Äî –∏–º—è —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ": "–û–±–æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–µ–¥–º–µ—Ç –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫—Ç–æ? —á—Ç–æ?",
    "–ù–∞—á–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö. –†–æ–¥ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö": "–ù–∞—á–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ ‚Äî –∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞. –†–æ–¥: –º—É–∂—Å–∫–æ–π, –∂–µ–Ω—Å–∫–∏–π, —Å—Ä–µ–¥–Ω–∏–π.",
    "–ú—è–≥–∫–∏–π –∑–Ω–∞–∫ (—å) –ø–æ—Å–ª–µ —à–∏–ø—è—â–∏—Ö –Ω–∞ –∫–æ–Ω—Ü–µ –∏–º—ë–Ω —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∂–µ–Ω—Å–∫–æ–≥–æ —Ä–æ–¥–∞": "–°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∂.—Ä. –Ω–∞ —à–∏–ø—è—â–∏–π –ø–∏—à—É—Ç—Å—è —Å —å: –Ω–æ—á—å, –º—ã—à—å. –ú.—Ä. –±–µ–∑ —å: –º—è—á, –ø–ª–∞—â.",
    "–°–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö. –ü–∞–¥–µ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã": "1-–µ —Å–∫–ª.: –∂.—Ä. –∏ –º.—Ä. –Ω–∞ -–∞,-—è. 2-–µ —Å–∫–ª.: –º.—Ä. –∏ —Å—Ä.—Ä. 3-–µ —Å–∫–ª.: –∂.—Ä. –Ω–∞ —å.",
    "–ò–º–µ–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –∏–º—ë–Ω —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö. –†–æ–ª—å –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏": "–û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫—Ç–æ? —á—Ç–æ? –í –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ÈÄöÂ∏∏ÊòØ –ø–æ–¥–ª–µ–∂–∞—â–µ–µ.",
    "–†–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –∏–º—ë–Ω —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö": "–û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–æ–≥–æ? —á–µ–≥–æ?",
    "–î–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –∏–º—ë–Ω —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö": "–û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–æ–º—É? —á–µ–º—É?",
    "–í–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –∏–º—ë–Ω —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö": "–û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–æ–≥–æ? —á—Ç–æ?",
    "–¢–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –∏–º—ë–Ω —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö": "–û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–µ–º? —á–µ–º?",
    "–ü—Ä–µ–¥–ª–æ–∂–Ω—ã–π –ø–∞–¥–µ–∂ –∏–º—ë–Ω —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö": "–û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –∫–æ–º? –æ —á–µ–º? –í—Å–µ–≥–¥–∞ —Å –ø—Ä–µ–¥–ª–æ–≥–æ–º.",
    "–ù–∞—á–∞–ª—å–Ω–∞—è –∏ –∫–æ—Å–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –∏–º—ë–Ω —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö. –†–∞–∑–±–æ—Ä –∏–º–µ–Ω–∏ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ": "–ù–∞—á–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ ‚Äî –∏–º.–ø. –µ–¥.—á. –†–∞–∑–±–æ—Ä: 1. –ù–∞—á.—Ñ–æ—Ä–º–∞ 2. –ü–æ—Å—Ç.–ø—Ä–∏–∑–Ω–∞–∫–∏ 3. –ù–µ–ø–æ—Å—Ç.–ø—Ä–∏–∑–Ω–∞–∫–∏ 4. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è —Ä–æ–ª—å.",
    "–ß–∞—Å—Ç—å —Ä–µ—á–∏ ‚Äî –∏–º—è –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ": "–û–±–æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫ –ø—Ä–µ–¥–º–µ—Ç–∞, –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–∞–∫–æ–π? –∫–∞–∫–∞—è? –∫–∞–∫–æ–µ? –∫–∞–∫–∏–µ?",
    "–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–º—ë–Ω –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å—Ä–µ–¥–∏ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç–µ–π —Ä–µ—á–∏": "–û—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–∞–∫–æ–π? —á–µ–π? –ò–∑–º–µ–Ω—è—é—Ç—Å—è –ø–æ —Ä–æ–¥–∞–º, —á–∏—Å–ª–∞–º, –ø–∞–¥–µ–∂–∞–º.",
    "–ü—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö": "–†–æ–¥–æ–≤—ã–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è: -—ã–π, -–∏–π, -–æ–π (–º.—Ä.), -–∞—è, -—è—è (–∂.—Ä.), -–æ–µ, -–µ–µ (—Å—Ä.—Ä.).",
    "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º—ë–Ω –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ —Ä–æ–¥–∞–º (–≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º —á–∏—Å–ª–µ)": "–ú.—Ä.: -—ã–π, -–∏–π, -–æ–π; –∂.—Ä.: -–∞—è, -—è—è; —Å—Ä.—Ä.: -–æ–µ, -–µ–µ.",
    "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º—ë–Ω –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ —á–∏—Å–ª–∞–º": "–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ: –∫–∞–∫–æ–π? –∫–∞–∫–∞—è? –∫–∞–∫–æ–µ? –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ: –∫–∞–∫–∏–µ?",
    "–ü–∞–¥–µ–∂ –∏–º—ë–Ω –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö (–æ–±—â–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ)": "–ò–∑–º–µ–Ω—è—é—Ç—Å—è –ø–æ –ø–∞–¥–µ–∂–∞–º, —Å–æ–≥–ª–∞—Å—É—è—Å—å —Å —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º.",
    "–ù–∞—á–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ –∏–º–µ–Ω–∏ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ": "–ò–º–µ–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –º—É–∂—Å–∫–æ–≥–æ —Ä–æ–¥–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞.",
    "–ß–∞—Å—Ç—å —Ä–µ—á–∏ ‚Äî –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ": "–£–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç, –ø—Ä–∏–∑–Ω–∞–∫ –∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –Ω–æ –Ω–µ –Ω–∞–∑—ã–≤–∞–µ—Ç –∏—Ö.",
    "–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ –∫–∞–∫ —á–∞—Å—Ç—å —Ä–µ—á–∏: –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –≤ —Ä–µ—á–∏": "–ó–∞–º–µ–Ω—è–µ—Ç –∏–º–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ, –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ, —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ.",
    "–õ–∏—á–Ω—ã–µ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è 1, 2, 3-–≥–æ –ª–∏—Ü–∞": "1-–µ –ª–∏—Ü–æ: —è, –º—ã; 2-–µ –ª–∏—Ü–æ: —Ç—ã, –≤—ã; 3-–µ –ª–∏—Ü–æ: –æ–Ω, –æ–Ω–∞, –æ–Ω–æ, –æ–Ω–∏.",
    "–ß–∞—Å—Ç—å —Ä–µ—á–∏ ‚Äî –≥–ª–∞–≥–æ–ª": "–û–±–æ–∑–Ω–∞—á–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞, –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —á—Ç–æ –¥–µ–ª–∞—Ç—å? —á—Ç–æ —Å–¥–µ–ª–∞—Ç—å?",
    "–ì–ª–∞–≥–æ–ª. –ò–Ω—Ñ–∏–Ω–∏—Ç–∏–≤. –í–∏–¥ –≥–ª–∞–≥–æ–ª–æ–≤": "–ò–Ω—Ñ–∏–Ω–∏—Ç–∏–≤ ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ (—á—Ç–æ –¥–µ–ª–∞—Ç—å? —á—Ç–æ —Å–¥–µ–ª–∞—Ç—å?). –í–∏–¥: —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã–π –∏ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã–π.",
    "–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –≥–ª–∞–≥–æ–ª–æ–≤": "–ò–∑–º–µ–Ω—è—é—Ç—Å—è –ø–æ —á–∏—Å–ª–∞–º: –¥–µ–ª–∞—é (–µ–¥.—á.) ‚Äî –¥–µ–ª–∞—é—Ç (–º–Ω.—á.).",
    "–í—Ä–µ–º–µ–Ω–∞ –≥–ª–∞–≥–æ–ª–æ–≤. –ù–∞–ø–∏—Å–∞–Ω–∏–µ –º—è–≥–∫–æ–≥–æ –∑–Ω–∞–∫–∞ (—å) –≤ –æ–∫–æ–Ω—á–∞–Ω–∏—è—Ö -–µ—à—å, -–∏—à—å": "–ù–∞—Å—Ç–æ—è—â–µ–µ, –ø—Ä–æ—à–µ–¥—à–µ–µ, –±—É–¥—É—â–µ–µ –≤—Ä–µ–º—è. –ú—è–≥–∫–∏–π –∑–Ω–∞–∫ –ø–∏—à–µ—Ç—Å—è: –ø–∏—à–µ—à—å, —Å–º–æ—Ç—Ä–∏—à—å.",
    "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –≥–ª–∞–≥–æ–ª–æ–≤ –ø–æ —Ä–æ–¥–∞–º": "–í –ø—Ä–æ—à–µ–¥—à–µ–º –≤—Ä–µ–º–µ–Ω–∏: —Å–¥–µ–ª–∞–ª (–º.—Ä.), —Å–¥–µ–ª–∞–ª–∞ (–∂.—Ä.), —Å–¥–µ–ª–∞–ª–æ (—Å—Ä.—Ä.).",
    "–ù–ï —Å –≥–ª–∞–≥–æ–ª–∞–º–∏. –ó–≤—É–∫–æ—Å–æ—á–µ—Ç–∞–Ω–∏–µ [—Ü–∞]": "–ù–ï —Å –≥–ª–∞–≥–æ–ª–∞–º–∏ –ø–∏—à–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª—å–Ω–æ: –Ω–µ –∑–Ω–∞—é. –ó–≤—É–∫–æ—Å–æ—á–µ—Ç–∞–Ω–∏–µ [—Ü–∞] –ø–∏—à–µ—Ç—Å—è –∫–∞–∫ —Ü–∞: —É–ª–∏—Ü–∞.",
    "–ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–±–æ—Ä –≥–ª–∞–≥–æ–ª–∞": "1. –ù–∞—á.—Ñ–æ—Ä–º–∞ 2. –ü–æ—Å—Ç.–ø—Ä–∏–∑–Ω–∞–∫–∏ 3. –ù–µ–ø–æ—Å—Ç.–ø—Ä–∏–∑–Ω–∞–∫–∏ 4. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è —Ä–æ–ª—å."
}

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text("–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –ø–æ —Ä—É—Å—Å–∫–æ–º—É —è–∑—ã–∫—É –¥–ª—è 3 –∫–ª–∞—Å—Å–∞ üìö\n–ù–∞–ø–∏—à–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É /rules.")

async def list_rules(update: Update, context: ContextTypes.DEFAULT_TYPE):
    topics = "\n".join([f"‚Ä¢ {topic}" for topic in rules.keys()])
    await update.message.reply_text("–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ–º—ã:\n" + topics)

async def get_rule(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text.strip().lower()
    for key, value in rules.items():
        if text in key.lower():
            await update.message.reply_text(f"**{key}**\n\n{value}", parse_mode='Markdown')
            return
    await update.message.reply_text("–ü—Ä–∞–≤–∏–ª–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π /rules, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–µ–º.")

def run_bot():
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
    try:
        application = Application.builder().token(TOKEN).build()
        
        application.add_handler(CommandHandler("start", start))
        application.add_handler(CommandHandler("rules", list_rules))
        application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, get_rule))
        
        logger.info("–ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...")
        logger.info(f"–¢–æ–∫–µ–Ω: {TOKEN[:10]}...")  # –õ–æ–≥–∏—Ä—É–µ–º –Ω–∞—á–∞–ª–æ —Ç–æ–∫–µ–Ω–∞
        application.run_polling()
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞: {e}")
        raise

# Flask –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è Render
app = Flask(__name__)

@app.route('/')
def home():
    return "Bot is running!"

def run_web_server():
    """–ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞"""
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port, debug=False)

if __name__ == "__main__":
    # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
    bot_thread = threading.Thread(target=run_bot)
    bot_thread.daemon = True
    bot_thread.start()
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ
    run_web_server()
